# 新页面布局实现计划（调整版）

## 1. 页面概述

创建一个新的页面，保持数字人在左边，将聊天区域漂浮在数字人上方，占据约30%高度（高度可自定义），类似直播间样式，右边区域先用空白代替。

## 2. 实现目标

- 保持现有 `chatPage` 不变
- 创建新页面 `hybridChatPage`
- 页面分为左右两部分：
  - 左边：数字人区域（占满高度） + 聊天区域（漂浮在数字人上方，占30%高度）
  - 右边：空白区域
- 聊天区域保持原有的对话形式（机器人在左，用户在右）
- 聊天消息滚动方式保持不变

## 3. 目录结构

```
src/views/
├── chatPage/          # 原聊天页面
└── hybridChatPage/    # 新混合布局聊天页面
    ├── index.vue      # 新页面主组件
```

## 4. 布局设计

```
┌─────────────────────────────────────────────────────────────────────┐
│                     页面顶部                                        │
├───────────────────────┬─────────────────────────────────────────────┤
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│      数字人区域        │                   空白区域                  │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│                       │                                             │
│    ┌────────────────┐ │                                             │
│    │   聊天区域      │ │                                             │
│    │   (30%高度)     │ │                                             │
│    │                │ │                                             │
│    └────────────────┘ │                                             │
└───────────────────────┴─────────────────────────────────────────────┘
```

## 5. 实现步骤

### 步骤 1：创建新页面目录和文件
- 创建 `src/views/hybridChatPage/` 目录
- 创建 `src/views/hybridChatPage/index.vue` 文件

### 步骤 2：设计页面布局
- 使用 CSS Grid 或 Flexbox 实现左右两栏布局
- 左边数字人区域使用相对定位
- 聊天区域使用绝对定位，漂浮在数字人上方，占据30%高度
- 右边区域为空白占位

### 步骤 3：实现页面内容
- 引入并使用现有的 `DigitalHuman` 组件
- 引入并使用现有的 `ChatMessages` 组件
- 配置 WebSocket 连接，复用现有的 `useWebSocket` hook
- 在右边区域添加空白占位

### 步骤 4：添加样式
- 设计整体页面布局样式
- 设计数字人区域样式
- 设计聊天区域样式，实现漂浮效果（阴影、边框、圆角等）
- 设计右边空白区域样式

### 步骤 5：测试验证
- 确保新页面功能正常
- 验证布局效果符合要求
- 检查聊天功能是否正常

## 6. 布局关键代码

### 6.1 整体布局

```html
<template>
  <div class="hybrid-chat-container">
    <!-- 左侧区域：数字人 + 聊天 -->
    <div class="left-section">
      <!-- 数字人区域 -->
      <div class="digital-human-container">
        <DigitalHuman :stream-url="streamUrl" />
      </div>
      
      <!-- 聊天区域（漂浮在数字人上方） -->
      <div class="chat-float-container">
        <ChatMessages
          :messages="messages"
          :connection-status="connectionStatus"
          :connection-status-text="connectionStatusText"
        />
      </div>
    </div>
    
    <!-- 右侧区域：空白占位 -->
    <div class="right-section">
      <!-- 空白区域，可根据需要添加内容 -->
    </div>
  </div>
</template>
```

### 6.2 样式设计

```css
.hybrid-chat-container {
  display: flex;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
}

.left-section {
  width: 50%; /* 可调整 */
  position: relative;
  background-color: #000;
}

.digital-human-container {
  width: 100%;
  height: 100%;
}

.chat-float-container {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 30%; /* 可自定义高度 */
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
  border-radius: 12px 12px 0 0;
  overflow: hidden;
}

.right-section {
  width: 50%; /* 可调整 */
  background-color: #f5f5f5;
}
```

## 7. 实现细节

### 7.1 聊天区域高度自定义
- 添加一个控制聊天区域高度的设置
- 可通过 CSS 变量或 JavaScript 动态调整

### 7.2 聊天区域样式
- 添加阴影效果，增强层次感
- 添加圆角顶部，美化视觉效果
- 设置半透明背景，既能看到聊天内容，又能看到下方的数字人

### 7.3 右边空白区域
- 目前为空白占位
- 预留扩展空间，可根据需要添加功能

## 8. 测试验证

- 检查页面布局是否符合要求
- 验证数字人显示是否正常
- 验证聊天区域是否漂浮在数字人上方
- 验证聊天区域高度是否符合要求
- 验证聊天消息是否正常显示
- 验证聊天消息滚动是否正常
- 验证 WebSocket 连接是否正常

## 9. 后续优化建议

- 添加聊天区域高度调整功能
- 添加聊天区域透明度调整功能
- 优化移动端显示效果
- 为右边空白区域添加功能扩展

通过以上实现计划，我们将创建一个新的页面，实现数字人在左边，聊天区域漂浮在数字人上方的布局效果，同时保持原有的聊天功能和对话形式。